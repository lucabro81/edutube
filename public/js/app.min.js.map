{"version":3,"sources":["variables.js","utility.js","helpers.js","frontend.js","app.js","filters.js","directives.js","controllers.js","services.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9RA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.min.js","sourcesContent":["var items = {\n    videoPrev       : null,\n    this_video_prev : null,\n    framePrev       : null,\n    modalInfo       : null,\n    videoCont       : null\n}\n\nvar utils = {\n    'width_window'        : 0,\n    'height_window'       : 0,\n    'left_dist'           : 0,\n    'right_dist'          : 0,\n    'incomplete_cover_dx' : false,\n    'biggerMediafiles'    : null,\n    'x'                   : null,\n    'y'                   : null,\n    'player'              : {\n        'modal'     : null,\n        'floating'  : null\n    }\n}\n\nvar html = {\n    'prev_cover' : \"<div class='prev_cover'></div>\",\n    'ombra_dx'   : \"<div class='ombra_dx'></div>\",\n    'ombra_sx'   : \"<div class='ombra_sx'></div>\"\n}","\n/**\n * Ritorna il baseurl del sito\n * \n * @returns {String}\n */\nfunction baseUrl() {\n    var win_loc = window.location;\n    if (win_loc.host === 'localhost') {\n        return win_loc.protocol + \"//\" + win_loc.host + \"/edutube/public/\";\n    }\n    return win_loc.protocol + \"//\" + win_loc.host + \"/remote/host/path/\";\n};\n\n/**\n * Scrive in console solo se siamo su localhost\n * \n * @param {String} msg\n * @returns {void}\n */\nfunction debug_console(msg) {\n    var win_loc = window.location;\n    if (win_loc.host === 'localhost') {\n        console.log(msg);\n    }\n}\n\n/**\n * Scrive in console la risposta delle richieste via ajax\n * \n * @param {type} xhr\n * @param {type} status\n * @param {type} error\n * @returns {undefined}\n */\nfunction errorResponse(xhr, status, error) {\n    debug_console(xhr);\n    debug_console(status);\n    debug_console(error);\n}\n\n/**\n * Ridimensiona e centra l'immagine contenuta in container passando le dimensione e il contenitore della stesa\n * \n * @param {int} width_img\n * @param {int} height_img\n * @param {jQuery} container\n * @returns {Object}\n */\nfunction resizeImage(width_img, height_img, container) {\n    \n    var new_h_img_width_cont = (height_img/width_img)*container.width();\n    console.log(container.height());\n    \n    var css = new Object();\n\n    if (new_h_img_width_cont <= container.height()) {\n        var width_num = ((width_img/height_img)*container.height());\n        var height_num = container.height();\n        css['width']       = width_num + 'px';\n        css['height']      = height_num + 'px';\n        css['margin-top']  = '0px';\n        css['margin-left'] = (-(width_num-container.width())/2) + 'px';\n    }\n    else {\n        css['width']       = container.width() + 'px';\n        css['height']      = new_h_img_width_cont + 'px';\n        css['margin-top']  = (-(new_h_img_width_cont - container.height())/2) + 'px';\n        css['margin-left'] = '0px';\n    }\n\n    return css;\n};\n\n/**\n * Ritorna la distanza dal bordo top della finestra dell'elemento passato\n * \n * @param {int} elem\n * @returns {int}\n */\nfunction dist_from_top(elem) {\n    var scrollTop     = $(window).scrollTop();\n    var elementOffset = elem.offset().top;\n    \n    return (elementOffset - scrollTop);\n}","/**\n * \n * @param {type} this_video_prev\n * @param {type} ombra\n * @param {type} left_mod\n * @param {type} cover\n * @returns {undefined}\n */\nfunction show_incomplete_prev(this_video_prev, ombra, left_mod, cover) {\n    \n    $(this_video_prev).css({'z-index': 200});\n    $(this_video_prev).append(ombra);\n    cover.append(html.prev_cover);\n\n    $(this_video_prev).stop(true).animate({\n        'left': left_mod\n    }, \n    {\n        duration : 100,\n        start: function() {\n            cover.find(\".prev_cover\").hide();\n\n            $(this_video_prev).find($(ombra).attr(\"class\")).hide();\n\n            cover.find(\".prev_cover\").fadeTo(100, 0.5);\n            $(this_video_prev).find($(ombra).attr(\"class\")).fadeTo(100, 1);\n        }\n    });\n}\n\n/**\n * \n * @param {type} this_video_prev\n * @param {type} ombra\n * @param {type} left_mod\n * @param {type} cover\n * @returns {undefined}\n */\nfunction hide_incomplete_prev(this_video_prev, ombra, left_mod, cover) {\n    \n    $(this_video_prev).stop(true).animate({\n        'left': left_mod\n    }, \n    {\n        duration : 100,\n        start: function() {\n\n            cover.find(\".prev_cover\").fadeTo(100, 0, function(){\n                $(this).remove();\n            });\n\n            $(this_video_prev).find(\".\"+$(ombra).attr(\"class\")).fadeTo(100, 0, function() {\n                $(this).remove();\n            });\n        },\n        end: function() {\n            $(this_video_prev).css({'z-index': 0});\n        }\n    });\n}\n\n/**\n* \n* @param {type} event\n* @returns {unresolved}\n*/\nfunction onPlayerStateChange(event, playerType) {\n\n   switch (event.data) {\n       case -1: return null; break;\n       case 0 : \n           console.log('stop video');\n           stopVideo(playerType); \n       break;\n       case 2:\n           console.log('pause video');\n       break;\n       default: return null; break;\n   }\n\n   /*var max_quality = event.target.getAvailableQualityLevels()[0];\n   var current_quality = event.target.getPlaybackQuality();\n\n   console.log(max_quality);\n   console.log(current_quality);\n\n   if (current_quality !== max_quality) {\n       event.target.setPlaybackQuality(max_quality);\n   }*/\n\n}\n\n/**\n* \n* @param {type} event\n* @returns {undefined}\n*/\nfunction onPlayerReady(event, start) {\n    console.log('play');\n    \n    if (start>0) {\n        event.target.seekTo(start, false);\n    }\n    \n    event.target.playVideo();\n}\n\n/**\n* \n* @param {type} cont\n* @returns {Boolean}\n*/\nfunction stopVideo(playerType){\n    \n    if (utils.player[playerType] !== null) {\n\n        utils.player[playerType].stopVideo();\n        utils.player[playerType].clearVideo();\n        utils.player[playerType].destroy();\n        \n        utils.player[playerType] = null;\n        \n        return true;\n    }\n    return false;\n}\n\n/**\n * \n * @param {type} playButton\n * @param {type} idVideoCont\n * @returns {undefined}\n */\nfunction playerManageHelper(playButton, idVideoCont, playerType, start) {\n\n    playButton.parent().append(\"<div id='\" + idVideoCont + \"' style='position: absolute; width:100%; height:100%; top:0px; padding-bottom:inherit'></div>\");\n\n    var tag = document.createElement('script');\n    tag.src = \"https://www.youtube.com/iframe_api\";\n\n    var firstScriptTag = document.getElementsByTagName('script')[0];\n    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n\n    var id = playButton.attr(\"data-videoid\");\n\n    utils.player[playerType] = new YT.Player(idVideoCont, {\n        videoId: id,\n        playerVars: {\n            'showinfo': 0,\n            'modestbranding': 0,\n            'rel': 0\n        },\n        events: {\n            'onReady': function(event) {\n                onPlayerReady(event, start);\n            },\n            'onStateChange': function(event) {\n                onPlayerStateChange(event, playerType);\n            }\n        }\n    });/**/\n\n}","\n$(window).on('load', function(event){\n});\n\n$(window).on('resize', function(){\n});\n\n$(document).ready(function(){\n    // HANDLERS\n\n    \n\n    /**\n     * \n     * @returns {undefined}\n     */\n    function dismissModal() {\n        stopVideo('modal');\n        $('div#video-cont').remove();\n    }\n\n    /**\n     * \n     * @param {type} event\n     * @returns {void}\n     */\n    function mousePosition(event) {\n        utils.x = event.pageX;\n        utils.y = event.pageY;\n    }\n\n    /**\n     *  \n     * @returns {void}\n     */\n    function playerManage() {\n        playerManageHelper($(this), 'video-cont', 'modal', 0);\n    }\n    \n    /**\n     * \n     * @returns {void}\n     */\n    function playerManageFloating() {\n        playerManageHelper($(this), 'video-cont-floating', 'floating', 0);\n    }\n    \n    // LISTENERS\n    \n    $(document).on('hidden.bs.modal', '#myModal', dismissModal);\n    $(document).on('click', '#play-video', playerManage);\n    $(document).on('click', '#play-video-floating', playerManageFloating);\n    $(document).on('mousemove mouseenter', mousePosition);\n});","var app = angular.module('edutube', ['ngRoute', 'ngAnimate'], function($interpolateProvider) {\n    $interpolateProvider.startSymbol('{??');\n    $interpolateProvider.endSymbol('??}');\n});\n\n/*app.run(function(){\n    \n});\n\napp.config(function($routeProvider, $locationProvider) {\n    $routeProvider.when('/',{\n        templateUrl: 'angular/templates/viewPreview.template.html',\n        controller: 'postWallController'\n    });\n});*/","/**\n * \n * @param {type} param1\n * @param {type} param2\n */\napp.filter('dateToISO', function() {\n    return function(input) {\n        if (input != undefined) {\n            var goodTime = input.replace(/(.+) (.+)/, \"$1T$2Z\");\n            return goodTime;\n        }\n        return null;\n    };\n});\n\n/**\n * \n */\napp.filter('imgByName', function(){\n    return function(input, name) {\n        \n        var imgUrl = '';\n        \n        if (input) {\n            $.each(input, function(i, obj) {\n                if (obj.nome === name) {\n                    imgUrl = obj.url;\n                    return false;\n                }\n            });\n\n            if (imgUrl === '') {\n                return 'placeholder';\n            }\n            return imgUrl;\n        }\n        return null\n    };\n});","app.directive('isoRepeat', function ($timeout, dataService ) {\n    return {\n        scope: {\n            items: '=isoRepeat'\n        },\n        templateUrl: 'angular/templates/viewPreview.template.html',\n        link: function (scope, element, attrs) {\n\n            var options = {\n                itemSelector: '.video-prev',\n                animationEngine : 'jquery',\n                //percentPosition: true,\n                masonry : {\n                    columnWidth : '.video-prev',\n                    isFitWidth: true,\n                    gutter: 10\n                }\n            };\n\n            $('#main-news').css({'overflow':'hidden'})\n\n            $('.fluid-container')\n                .find('img')\n                .css(resizeImage(1920, 1080, $('#main-news')));\n\n            element.isotope(options);\n\n\n\n            scope.$watch('items', function(newVal, oldVal){\n                $timeout(function(){\n                    element.isotope( 'reloadItems' ).isotope({ sortBy: 'original-order' });\n\n\n                }, true);\n            });\n\n            scope.modalInfoShow = function(item, modal_sel){\n            \n                // CLOSE FLOATING PLAYER\n                console.log($('#floating_player').is(':visible'));\n                if ($('#floating_player').is(':visible')) {\n                    stopVideo('floating');\n                    $('div#video-cont-floating').remove();\n                    $('#floating_player').fadeTo(200, 0);\n                }\n\n                // INIT MODAL\n                var modal = $(modal_sel);\n\n                $('.modal-dialog').css({\n                    //'margin': '0 auto',\n                    'width': '100%'\n                });\n                $('.draggable-box').attr('style', '');\n\n                $('.modal-dialog').draggable({\n                    containment: \"parent\",\n                    snap: \"#myModal\",\n                    stop: function(event, ui) {\n                    }\n                });\n\n                // Send data for modal\n                dataService.post = item;\n\n                // TODO: ora che c'è la direttiva funcionante tutta questa parte può essere sbrigata dal template\n                //var title            = item.title;\n                var mediafiles       = item.mediafiles;\n                var img_header       = modal.find('#img-prev-video');\n\n                // si cerca l'ultimo file che dovrebbe essere il più grande possible\n                // TODO: da verificare\n                $.each(mediafiles, function(i, obj) {\n                    utils.biggerMediafiles = obj;\n                });\n\n                img_header.attr('src', utils.biggerMediafiles.url);\n                img_header.one('load', function () {\n\n                    // lo metto prima se no il 100% viene inteso come 100px, possibile bug jquery\n                    //modal.fadeTo(200, 1);\n                    //modal.on('show.bs.modal', function () {\n\n                        var height = (modal.find('.img-video').width()/16)*9;\n                        var total_height = height + $('.video-info-modal ').outerHeight() + $('.dati-video').outerHeight() + $('.header').outerHeight() + 60;\n\n                        if (total_height > $(window).height()) {\n                            height = height - (total_height-$(window).height());\n                            console.log(height);\n                        }\n\n                        //modal.find('.img-video').css({'height':height+'px'})\n                        modal.find('.img-video').css({\n                            'height': '100%', \n                            'padding-bottom': $('.video-info-modal').outerHeight() + 'px'\n                        });\n                        img_header.css(resizeImage(utils.biggerMediafiles.width, utils.biggerMediafiles.height, modal.find('.img-video')));\n\n                    //});\n                    //modal.find('.img-video').find('p').text(title);\n\n                    //TODO: inserire spinner\n                    //TODO: vedere se si riesce a sistemare la transizione fade\n\n                });\n\n                //modal.find('.img-video').css({'height': '100%'});\n\n                $('.modal-dialog').resizable({\n                    handles: \"n, e, s, w, se\",\n                    resize: function( event, ui ) {\n                        modal.find('.img-video').css({\n                            'height': '100%', \n                            'padding-bottom': $('.video-info-modal').outerHeight() + 'px'\n                        });\n                        img_header.css(resizeImage(utils.biggerMediafiles.width, utils.biggerMediafiles.height, modal.find('.img-video')));\n                    }\n                });\n                \n            }\n        }\n    }\n});\n\napp.directive('ngHover', ['$animate', function($animate) {\n    return function(scope, element, attrs) {\n\n        element.hover(\n            function() {\n                utils.left_dist       = element.offset().left;\n                utils.right_dist      = $(window).width() - (element.offset().left + element.width());\n\n                if (utils.left_dist<0) {\n\n                    // elemento a sinistra parzialmente visibile\n\n                    var ombra = html.ombra_dx;\n                    var left_mod = \"+=\" + ((-utils.left_dist) + 10) + \"px\";\n                    var cover = element.next();\n\n                    show_incomplete_prev(element, ombra, left_mod, cover);\n                }\n                else if (utils.right_dist<0) {\n\n                    // elemento a destra parzialmente visibile\n\n                    var ombra = html.ombra_sx;\n                    var left_mod = \"-=\" + ((-utils.right_dist) + 10)  + \"px\";\n                    var cover = element.prev();\n\n                    show_incomplete_prev(element, ombra, left_mod, cover);    \n                }/**/\n            },\n            function() {\n                if (utils.left_dist<0) {\n\n                    var ombra = html.ombra_dx;\n                    var left_mod = 0;\n                    var cover = element.next();\n\n                    hide_incomplete_prev(element, ombra, left_mod, cover);\n                }\n                else if (utils.right_dist<0) {\n\n                    var ombra = html.ombra_sx;\n                    var left_mod = element.prev().position().left + element.width() + 10 + \"px\";\n                    var cover = element.prev();\n\n                    hide_incomplete_prev(element, ombra, left_mod, cover);\n                }\n            }\n        );\n\n        element.hover(\n            function() {\n            \n                element.find('.frame-prev').stop(true).animate({\n                    'border-width' : '4px'\n                },100);\n\n                element.find('.video-instruments').stop(true).animate({\n                    'top' : -$(this).find('.video-instruments').innerHeight() + 'px'\n                },100);\n\n                element.find('.cover-prev-img').fadeTo(100, 1);\n\n            },\n            function() {\n                element.find('.frame-prev').stop(true).animate({\n                    'border-width' : '0px'\n                },100);\n\n                element.find('.video-instruments').stop(true).animate({\n                    'top' : '0px'\n                },100);\n\n                element.find('.cover-prev-img').fadeTo(100, 0);\n                \n                // se il menu è aperto, lasciando la preview si chiude\n                element\n                    .find('.video-instruments ')\n                    .find(\".dropdown-toggle[aria-expanded=true]\")\n                    .dropdown(\"toggle\");\n            }\n        );\n    }\n}]);\n\napp.directive('ngHoverfloating', ['$animate', function($animate) {\n    return function(scope, element, attrs) {\n        element.hover(\n            function() {\n                \n                // appare titolo video floating\n                var infoVideo = element.find('.video-info');\n                infoVideo.stop(true).animate({\n                   'bottom' : (-infoVideo.outerHeight()) + 'px' \n                },\n                100);\n                \n                // appare header floating\n                var header = element.find('.header');\n                header.stop(true).animate({\n                   'top' : (-header.outerHeight()) + 'px' \n                },\n                100);\n            },\n            function() {\n                \n                // scompare titolo video floating\n                var infoVideo = element.find('.video-info');\n                infoVideo.stop(true).animate({\n                   'bottom' : '0px' \n                },\n                100);\n                \n                // scompare header floating\n                var header = element.find('.header');\n                header.stop(true).animate({\n                   'top' : '0px' \n                },\n                100);\n            }\n        );\n    }\n}]);\n\napp.directive('ngOnshow', function ($timeout, dataService) {\n    \n    return function(scope, element, attrs) {\n        scope.$watch(function() {\n                return dataService.post;\n            }, \n            function(value, oldValue) {\n                \n                if (scope.setModalGraphic) {\n                    scope.setModalGraphic()\n                }\n                \n                if (scope.setFloatingGraphic) {\n                    scope.setFloatingGraphic();\n                }\n                \n            }, \n            true);/**/\n    }\n});\n\napp.directive('ngFixedmenu', function($window) {\n    \n    return function(scope, element, attrs) {\n        /*$(window).on('scroll',function() {\n            if ($(window).scrollTop()>500) {\n                $(element).addClass('fixed-menu');\n                $(\"#main-cont\").css({'margin-top':'40px'});\n                \n            }\n            \n            else {\n                $(element).removeClass('fixed-menu');\n                $(\"#main-cont\").css({'margin-top':'0px'});\n            }\n        })*/\n        \n        //angular.element($window).bind('scroll', function () {\n       /* element.bind('scroll', function () {\n            \n            if ($window.scrollY>500) {\n                scope.fixed = true;\n            }\n            else {\n                scope.fixed = false;\n            }\n            \n            console.log(element);\n            \n            scope.$apply();\n        });*/\n        \n        scope.$watch(function(){\n                return element[0].getBoundingClientRect().top + $window.pageYOffset;\n            }, \n            function(newValue, oldValue){\n                console.log(newValue + \", \" + oldValue)\n            }\n        );\n    };\n    \n})","/**\n * \n * @param {type} param1\n * @param {type} param2\n */\napp.controller('ItemsCtrl', function ItemsCtrl($scope, $timeout, dataService) {\n    \n    /**\n     * \n     * @returns {undefined}\n     */\n    $scope.update = function() {\n        \n        dataService.get().then(function (data) {                       \n            $scope.collection = data;\n        });\n    };\n    \n    $scope.update(); \n    \n});\n\n/**\n * \n */\napp.controller('modalInfoCtrl', function modalInfoCtrl($scope, dataService, $interval){\n    \n    /**\n     * \n     * @returns {undefined}\n     */\n    $scope.setModalGraphic = function() {\n        $scope.item = dataService.post;\n    };\n    \n    /**\n     * \n     * @param {type} modal_sel\n     * @returns {undefined}\n     */\n    $scope.modalInfoHide = function(modal_sel) {\n        \n        var modal = $(modal_sel);\n        modal.attr('hideon', 0);\n        \n        modal.fadeTo(200, 0, function() {\n            modal.css({'z-index': -1000});\n        });\n        \n        $('html, body').removeClass('noscroll');\n    };\n    \n    /**\n     * \n     * @param {type} box\n     * @returns {undefined}\n     */\n    $scope.showBox = function(box) {\n        $(box).css({'z-index': 1000});\n        $(box).fadeTo(100, 1);\n        \n        var widthModalDialog = $('.modal-dialog').width();\n        \n        $(box).draggable({\n            containment: \"parent\",\n            snap: \"#myModal\",\n            stop: function(event, ui) {\n                \n                /*var positionRightDraggableBox = $(window).width()-(ui.position.left + $(box).width());\n                \n                console.log(\"ui.position.left: \" + ui.position.left);\n                console.log(\"$(box).width(): \" + $(box).width());\n                console.log(\"positionRightDraggableBox: \" + positionRightDraggableBox);\n                \n                if (positionRightDraggableBox <= 30) {\n                    $('.modal-dialog').css({\n                        'width': (widthModalDialog - $(box).width() - 30) + 'px',\n                        'margin' : '0 auto 0 0'\n                    });\n                }\n                else {\n                    $('.modal-dialog').css({\n                        'width': '100%',\n                        'margin' : '0 auto'\n                    });\n                }*/\n            }\n        });\n        $(box).resizable({\n            handles: \"n, e, s, w, se\",\n            resize: function( event, ui ) {\n                \n            }\n        });\n    }\n    \n    /**\n     * \n     * @param {type} box\n     * @returns {undefined}\n     */\n    $scope.hideBox = function(box) {\n        $(box).fadeTo(100, 0, function() {\n            $(box).css({'z-index': -1000});\n        });\n    }\n    \n    /**\n     * \n     * @param {type} target\n     * @param {type} other_boxes\n     * @returns {undefined}\n     */\n    $scope.focus = function(target, other_boxes) {\n\n        $(other_boxes).css({'z-index': 999});\n        $(target).css({'z-index': 1000});\n    }\n    \n    /*$scope.$watch(function() { return $scope.fixed }, function(newValue, oldValue) {\n        \n            console.log(newValue+\" \"+oldValue);\n            if (newValue != oldValue) {\n                if (newValue) {\n                    $('nav').addClass('fixed-menu');\n                }\n                else {\n                    $('nav').removeClass('fixed-menu');\n                }\n            }\n        },true\n    );*/\n    \n    /**\n     * \n     * @param {selector} box\n     * @returns {void}\n     */\n    $scope.pushpin = function(box) {\n        \n        $(box).fadeTo(200, 1).draggable();\n        \n        if (utils.player['modal'] != null) {\n            var videCurrentTime = utils.player['modal'].getCurrentTime();\n            playerManageHelper($('#play-video-floating'), 'video-cont-floating', 'floating', videCurrentTime);\n        }\n        \n        $('#myModal').modal('hide');\n        \n        debug_console(\"videCurrentTime: \" + videCurrentTime);\n        \n    };\n    \n    /*\n    var promise;      \n    var holded = false;\n\n    $scope.mouseDown = function() {\n        promise = $interval(function () { \n            holded = true;\n        }, 1000);\n    };\n\n    $scope.mouseUp = function () {\n        holded = false;\n        $interval.cancel(promise);\n    };\n    \n    $scope.$watch(function(){ return holded;}, function(newValue, oldValue) {\n        \n        if (newValue != oldValue) {\n            if (newValue) {\n                //hold\n                \n                \n                console.log(utils.x);\n                console.log(utils.y);\n            }\n            else {\n                //release\n                \n            }\n        }\n    },true);\n    */\n});\n\napp.controller('pushpinCtrl', function pushpinCtrl($scope, dataService, $interval){\n   /**\n     * \n     * @returns {undefined}\n     */\n    $scope.setFloatingGraphic = function() {\n        $scope.item = dataService.post;\n    }; \n    \n    /**\n     * \n     * @param {type} floating_sel\n     * @returns {undefined}\n     */\n    $scope.pushpinHide = function(floating_sel) {\n        console.log(floating_sel);\n        \n        stopVideo('floating');\n        $('div#video-cont-floating').remove();\n        $(floating_sel).fadeTo(200, 0);\n    };\n    \n    $scope.returnModal = function(item, modal_sel, floating_sel) {\n        $scope.pushpinHide(floating_sel);\n        \n        var modal = $(modal_sel);\n\n        $('.modal-dialog').css({\n            //'margin': '0 auto',\n            'width': '100%',\n            'height': '100%',\n        });\n        $('.draggable-box').attr('style', '');\n\n        $('.modal-dialog').draggable({\n            containment: \"parent\",\n            snap: \"#myModal\",\n            stop: function(event, ui) {\n            }\n        });\n        \n        // TODO: ora che c'è la direttiva funcionante tutta questa parte può essere sbrigata dal template\n        //var title            = item.title;\n        var mediafiles       = item.mediafiles;\n        var img_header       = modal.find('#img-prev-video');\n\n        // si cerca l'ultimo file che dovrebbe essere il più grande possible\n        // TODO: da verificare\n        $.each(mediafiles, function(i, obj) {\n            utils.biggerMediafiles = obj;\n        });\n\n\n\n        img_header.attr('src', utils.biggerMediafiles.url);\n        img_header.one('load', function () {\n\n            var height = (modal.find('.img-video').width()/16)*9;\n            var total_height = height + $('.video-info-modal ').outerHeight() + $('.dati-video').outerHeight() + $('.header').outerHeight() + 60;\n\n            if (total_height > $(window).height()) {\n                height = height - (total_height-$(window).height());\n                console.log(height);\n            }\n\n            //modal.find('.img-video').css({'height':height+'px'})\n            modal.find('.img-video').css({\n                'height': '100%', \n                'padding-bottom': $('.video-info-modal').outerHeight() + 'px'\n            });\n            img_header.css(resizeImage(utils.biggerMediafiles.width, utils.biggerMediafiles.height, modal.find('.img-video')));\n\n            //TODO: inserire spinner\n            //TODO: vedere se si riesce a sistemare la transizione fade\n\n        });\n    }\n});\n\n/**\n * \n */\napp.controller('menuCtrl', function menuCtrl($scope, $window) {\n    \n    // conservare\n    $scope.$watch(function() { return $scope.fixed }, function(newValue, oldValue) {\n        \n            console.log(newValue+\" \"+oldValue);\n            if (newValue != oldValue) {\n                if (newValue) {\n                    $('nav').addClass('fixed-menu');\n                }\n                else {\n                    $('nav').removeClass('fixed-menu');\n                }\n            }\n        },true\n    );/**/\n    \n})","/**\n * \n * @param {type} param1\n * @param {type} param2\n */\napp.service('dataService', function ($http) {\n    return {\n        get: function () {\n            var promise = $http\n                .get(baseUrl() + 'api/posts')\n                .then(function (resp) {\n                    return resp.data.featured;\n                });\n            return promise;\n        },\n        post: null \n    };\n});"],"sourceRoot":"/source/"}