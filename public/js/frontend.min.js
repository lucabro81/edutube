// HANDLERS

var items = {
	'hl' 	       : null,
	'mainews'      : null,
	'mainews_img'  : null,
	'parallax_div' : null
}

var utils = {
	'width_window'  : 0,
	'height_window' : 0
}

// HANDLERS

function resizeImage(width_img, height_img, container) {

	var new_h_img_width_cont = (height_img/width_img)*container.width();
	var css = new Object();

	if (new_h_img_width_cont<=container.height()) {
            var width_num = ((width_img/height_img)*container.height());
            var height_num = container.height();
            css['width']       = width_num + 'px';
            css['height']      = height_num + 'px';
            css['margin-top']  = '0px';
            css['margin-left'] = (-(width_num-container.width())/2) + 'px';
	}
	else {
            css['width']       = container.width() + 'px';
            css['height']      = new_h_img_width_cont + 'px';
            css['margin-top']  = (-(new_h_img_width_cont - container.height())/2) + 'px';
            css['margin-left'] = '0px';
	}

	return css;
};

// LISTENERS

$(document).ready(function(){

	items.hl 	   	   = $('#highlights_row>div');
	items.mainews  	   = $('#main-news div:first');
	items.mainews_img  = $('#main-news div:first img');
	items.parallax_div = $('.scrollazzo');
	
	//$(document).on('click','.titolo_notizia',espandiContraiNotizia); 
});

$(window).resize(function() {
	items.hl.css({'min-height':0});

    if(this.resizeTO) clearTimeout(this.resizeTO);
    this.resizeTO = setTimeout(function() {
        $(this).trigger('resizeEnd');
    }, 500);
});

$(window).on('load resizeEnd', function(event){

	utils.width_window = $(window).width();
	utils.height_window = $(window).height();

	if (event.type=='load') {
		// INIT
		items.parallax_div.parallax('50%',-0.5,true);

		var height_main_news = utils.height_window-50-items.hl.parent().height();
		if (utils.height_window>utils.width_window) { height_main_news = utils.height_window*0.6; }
		items.mainews.css({'height':height_main_news+'px'});

		var height_testo_main_news = $('#testo_main_news').height();
		var top_testo_main_news    = (height_main_news - height_testo_main_news)/2;

		$('#testo_main_news').css({'top' : top_testo_main_news + 'px'});
	}
	
	items.hl.css({'min-height':items.hl.parent().height()});
	items.hl.each(function(){
		var img = $(this).find('img').eq(0)
		img.css(resizeImage(img.width(),img.height(),$(this)));
	});

	items.mainews_img.css(resizeImage(items.mainews_img.width(),items.mainews_img.height(),items.mainews));
	
});
//# sourceMappingURL=frontend.min.js.map